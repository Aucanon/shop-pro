import{v as V}from"./use-expose-287cc7e0.js";import{b as K,q as c,t as g,n as b,d as Q,g as D,y as h,L as F,U as X,w as I,aj as Y,k as v,J as y,F as k,H as A,aO as R,i as z,D as Z,aQ as p,p as N,ak as ee,A as te}from"./index-5c77cc65.js";import{c as ne}from"./interceptor-b6b597e5.js";const[ae,S]=K("stepper"),le=200,ie=600,P=(t,u)=>String(t)===String(u),ue={min:c(1),max:c(1/0),name:c(""),step:c(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:g,showMinus:g,showInput:g,longPress:g,allowEmpty:Boolean,modelValue:b,inputWidth:b,buttonSize:b,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:c(1),decimalLength:b};var se=Q({name:ae,props:ue,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(t,{emit:u}){const o=e=>{const{min:n,max:i,allowEmpty:f,decimalLength:l}=t;return f&&e===""||(e=R(String(e),!t.integer),e=e===""?0:+e,e=Number.isNaN(e)?+n:e,e=Math.max(Math.min(+i,e),+n),z(l)&&(e=e.toFixed(+l))),e},O=()=>{var e;const n=(e=t.modelValue)!=null?e:t.defaultValue,i=o(n);return P(i,t.modelValue)||u("update:modelValue",i),i};let s;const x=D(),a=D(O()),d=h(()=>t.disabled||t.disableMinus||a.value<=+t.min),m=h(()=>t.disabled||t.disablePlus||a.value>=+t.max),q=h(()=>({width:F(t.inputWidth),height:F(t.buttonSize)})),C=h(()=>X(t.buttonSize)),G=()=>{const e=o(a.value);P(e,a.value)||(a.value=e)},E=e=>{t.beforeChange?ne(t.beforeChange,{args:[e],done(){a.value=e}}):a.value=e},w=()=>{if(s==="plus"&&m.value||s==="minus"&&d.value){u("overlimit",s);return}const e=s==="minus"?-t.step:+t.step,n=o(ee(+a.value,e));E(n),u(s)},H=e=>{const n=e.target,{value:i}=n,{decimalLength:f}=t;let l=R(String(i),!t.integer);if(z(f)&&l.includes(".")){const _=l.split(".");l=`${_[0]}.${_[1].slice(0,+f)}`}t.beforeChange?n.value=String(a.value):P(i,l)||(n.value=l);const J=l===String(+l);E(J?+l:l)},U=e=>{var n;t.disableInput?(n=x.value)==null||n.blur():u("focus",e)},W=e=>{const n=e.target,i=o(n.value);n.value=String(i),a.value=i,Z(()=>{u("blur",e),p()})};let T,r;const L=()=>{r=setTimeout(()=>{w(),L()},le)},$=()=>{t.longPress&&(T=!1,clearTimeout(r),r=setTimeout(()=>{T=!0,w(),L()},ie))},B=e=>{t.longPress&&(clearTimeout(r),T&&N(e))},j=e=>{t.disableInput&&N(e)},M=e=>({onClick:n=>{N(n),s=e,w()},onTouchstart:()=>{s=e,$()},onTouchend:B,onTouchcancel:B});return I(()=>[t.max,t.min,t.integer,t.decimalLength],G),I(()=>t.modelValue,e=>{P(e,a.value)||(a.value=o(e))}),I(a,e=>{u("update:modelValue",e),u("change",e,{name:t.name})}),Y(()=>t.modelValue),()=>v("div",{role:"group",class:S([t.theme])},[y(v("button",k({type:"button",style:C.value,class:[S("minus",{disabled:d.value}),{[A]:!d.value}],"aria-disabled":d.value||void 0},M("minus")),null),[[V,t.showMinus]]),y(v("input",{ref:x,type:t.integer?"tel":"text",role:"spinbutton",class:S("input"),value:a.value,style:q.value,disabled:t.disabled,readonly:t.disableInput,inputmode:t.integer?"numeric":"decimal",placeholder:t.placeholder,"aria-valuemax":t.max,"aria-valuemin":t.min,"aria-valuenow":a.value,onBlur:W,onInput:H,onFocus:U,onMousedown:j},null),[[V,t.showInput]]),y(v("button",k({type:"button",style:C.value,class:[S("plus",{disabled:m.value}),{[A]:!m.value}],"aria-disabled":m.value||void 0},M("plus")),null),[[V,t.showPlus]])])}});const me=te(se);export{me as S};
