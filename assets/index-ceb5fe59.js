import{u as ae,v as Be}from"./use-expose-287cc7e0.js";import{Q as K,R as oe,N as Re,a3 as $e,aK as _e,ah as Pe,P as ie,b as O,n as B,v as le,q as _,d as L,g as P,a4 as re,h as se,y as T,z as ce,s as de,a8 as Ae,w as I,a6 as ue,k as b,ac as fe,M as N,A as q,t as W,i as U,ai as ze,m as F,C as Ne,x as Oe,a9 as Le,D as z,aL as Ee,L as p,V as Me,aa as De,aV as ee,F as He,E as Ve,u as We,j as Ze,aM as Fe,J as je}from"./index-5c77cc65.js";import{u as ve}from"./use-id-ae6cda1c.js";import{a as Ke,r as Ue}from"./use-route-7932d44a.js";import{a as qe,T as Xe,S as Ye}from"./index-a5da3e41.js";import{u as Je}from"./use-refs-988793b1.js";import{o as Qe}from"./on-popup-reopen-e5c081b4.js";import{c as Ge}from"./interceptor-b6b597e5.js";function pe(e,i,l){let d=0;const a=e.scrollLeft,o=l===0?1:Math.round(l*1e3/16);function s(){e.scrollLeft+=(i-a)/o,++d<o&&K(s)}s()}function et(e,i,l,d){let a=oe(e);const o=a<i,s=l===0?1:Math.round(l*1e3/16),h=(i-a)/s;function u(){a+=h,(o&&a>i||!o&&a<i)&&(a=i),Re(e,a),o&&a<i||!o&&a>i?K(u):d&&K(d)}u()}function tt(e,i){if(!$e||!window.IntersectionObserver)return;const l=new IntersectionObserver(o=>{i(o[0].intersectionRatio>0)},{root:document.body}),d=()=>{e.value&&l.observe(e.value)},a=()=>{e.value&&l.unobserve(e.value)};_e(a),Pe(a),ie(d)}const[nt,at]=O("sticky"),ot={zIndex:B,position:le("top"),container:Object,offsetTop:_(0),offsetBottom:_(0)};var it=L({name:nt,props:ot,emits:["scroll","change"],setup(e,{emit:i,slots:l}){const d=P(),a=re(d),o=se({fixed:!1,width:0,height:0,transform:0}),s=T(()=>ce(e.position==="top"?e.offsetTop:e.offsetBottom)),h=T(()=>{const{fixed:f,height:x,width:c}=o;if(f)return{width:`${c}px`,height:`${x}px`}}),u=T(()=>{if(!o.fixed)return;const f=de(Ae(e.zIndex),{width:`${o.width}px`,height:`${o.height}px`,[e.position]:`${s.value}px`});return o.transform&&(f.transform=`translate3d(0, ${o.transform}px, 0)`),f}),g=f=>i("scroll",{scrollTop:f,isFixed:o.fixed}),y=()=>{if(!d.value||fe(d))return;const{container:f,position:x}=e,c=N(d),A=oe(window);if(o.width=c.width,o.height=c.height,x==="top")if(f){const r=N(f),S=r.bottom-s.value-o.height;o.fixed=s.value>c.top&&r.bottom>0,o.transform=S<0?S:0}else o.fixed=s.value>c.top;else{const{clientHeight:r}=document.documentElement;if(f){const S=N(f),R=r-S.top-s.value-o.height;o.fixed=r-s.value<c.bottom&&r>S.top,o.transform=R<0?-R:0}else o.fixed=r-s.value<c.bottom}g(A)};return I(()=>o.fixed,f=>i("change",f)),ue("scroll",y,{target:a}),tt(d,y),()=>{var f;return b("div",{ref:d,style:h.value},[b("div",{class:at({fixed:o.fixed}),style:u.value},[(f=l.default)==null?void 0:f.call(l)])])}}});const lt=q(it),[rt,te]=O("tab");var st=L({name:rt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:B,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:W},setup(e,{slots:i}){const l=T(()=>{const a={},{type:o,color:s,disabled:h,isActive:u,activeColor:g,inactiveColor:y}=e;s&&o==="card"&&(a.borderColor=s,h||(u?a.backgroundColor=s:a.color=s));const x=u?g:y;return x&&(a.color=x),a}),d=()=>{const a=b("span",{class:te("text",{ellipsis:!e.scrollable})},[i.title?i.title():e.title]);return e.dot||U(e.badge)&&e.badge!==""?b(ze,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[a]}):a};return()=>b("div",{id:e.id,role:"tab",class:[te([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[d()])}});const[ct,ne]=O("tabs");var dt=L({name:ct,props:{count:F(Number),inited:Boolean,animated:Boolean,duration:F(B),swipeable:Boolean,lazyRender:Boolean,currentIndex:F(Number)},emits:["change"],setup(e,{emit:i,slots:l}){const d=P(),a=h=>i("change",h),o=()=>{var h;const u=(h=l.default)==null?void 0:h.call(l);return e.animated||e.swipeable?b(qe,{ref:d,loop:!1,class:ne("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:a},{default:()=>[u]}):u},s=h=>{const u=d.value;u&&u.state.active!==h&&u.swipeTo(h,{immediate:!e.inited})};return I(()=>e.currentIndex,s),Ne(()=>{s(e.currentIndex)}),()=>b("div",{class:ne("content",{animated:e.animated||e.swipeable})},[o()])}});const[he,V]=O("tabs"),ut={type:le("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:_(0),duration:_(.3),animated:Boolean,ellipsis:W,swipeable:Boolean,scrollspy:Boolean,offsetTop:_(0),background:String,lazyRender:W,lineWidth:B,lineHeight:B,beforeChange:Function,swipeThreshold:_(5),titleActiveColor:String,titleInactiveColor:String},be=Symbol(he);var ft=L({name:he,props:ut,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:i,slots:l}){let d,a,o;const s=P(),h=P(),u=P(),g=ve(),y=re(s),[f,x]=Je(),{children:c,linkChildren:A}=Oe(be),r=se({inited:!1,position:"",lineStyle:{},currentIndex:-1}),S=T(()=>c.length>e.swipeThreshold||!e.ellipsis||e.shrink),R=T(()=>({borderColor:e.color,background:e.background})),C=(t,n)=>{var v;return(v=t.name)!=null?v:n},X=T(()=>{const t=c[r.currentIndex];if(t)return C(t,r.currentIndex)}),Z=T(()=>ce(e.offsetTop)),Y=T(()=>e.sticky?Z.value+d:0),E=t=>{const n=h.value,v=f.value;if(!S.value||!n||!v||!v[r.currentIndex])return;const m=v[r.currentIndex].$el,w=m.offsetLeft-(n.offsetWidth-m.offsetWidth)/2;pe(n,w,t?0:+e.duration)},k=()=>{const t=r.inited;z(()=>{const n=f.value;if(!n||!n[r.currentIndex]||e.type!=="line"||fe(s.value))return;const v=n[r.currentIndex].$el,{lineWidth:m,lineHeight:w}=e,$=v.offsetLeft+v.offsetWidth/2,H={width:p(m),backgroundColor:e.color,transform:`translateX(${$}px) translateX(-50%)`};if(t&&(H.transitionDuration=`${e.duration}s`),U(w)){const G=p(w);H.height=G,H.borderRadius=G}r.lineStyle=H})},me=t=>{const n=t<r.currentIndex?-1:1;for(;t>=0&&t<c.length;){if(!c[t].disabled)return t;t+=n}},M=t=>{const n=me(t);if(!U(n))return;const v=c[n],m=C(v,n),w=r.currentIndex!==null;r.currentIndex=n,m!==e.active&&(i("update:active",m),w&&i("change",m,v.title))},D=t=>{const n=c.find((m,w)=>C(m,w)===t),v=n?c.indexOf(n):0;M(v)},J=(t=!1)=>{if(e.scrollspy){const n=c[r.currentIndex].$el;if(n&&y.value){const v=ee(n,y.value)-Y.value;a=!0,et(y.value,v,t?0:+e.duration,()=>{a=!1})}}},ge=(t,n,v)=>{const{title:m,disabled:w}=c[n],$=C(c[n],n);w?i("disabled",$,m):(Ge(e.beforeChange,{args:[$],done:()=>{M(n),J()}}),i("click",$,m),Ke(t)),i("click-tab",{name:$,title:m,event:v,disabled:w})},ye=t=>{o=t.isFixed,i("scroll",t)},we=t=>{z(()=>{D(t),J(!0)})},xe=()=>{for(let t=0;t<c.length;t++){const{top:n}=N(c[t].$el);if(n>Y.value)return t===0?0:t-1}return c.length-1},Se=()=>{if(e.scrollspy&&!a){const t=xe();M(t)}},Te=()=>c.map((t,n)=>b(st,He({id:`${g}-${n}`,ref:x(n),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:n===r.currentIndex,controls:t.id,scrollable:S.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:v=>ge(t,n,v)},Ve(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),Ce=()=>{if(e.type==="line"&&c.length)return b("div",{class:V("line"),style:r.lineStyle},null)},Q=()=>{var t,n;const{type:v,border:m}=e;return b("div",{ref:u,class:[V("wrap"),{[Me]:v==="line"&&m}]},[b("div",{ref:h,role:"tablist",class:V("nav",[v,{shrink:e.shrink,complete:S.value}]),style:R.value,"aria-orientation":"horizontal"},[(t=l["nav-left"])==null?void 0:t.call(l),Te(),Ce(),(n=l["nav-right"])==null?void 0:n.call(l)])])};I([()=>e.color,Le],k),I(()=>e.active,t=>{t!==X.value&&D(t)}),I(()=>c.length,()=>{r.inited&&(D(e.active),k(),z(()=>{E(!0)}))}),I(()=>r.currentIndex,()=>{E(),k(),o&&!e.scrollspy&&De(Math.ceil(ee(s.value)-Z.value))});const ke=()=>{D(e.active),z(()=>{r.inited=!0,u.value&&(d=N(u.value).height),E(!0)})},Ie=(t,n)=>i("rendered",t,n);return ae({resize:k,scrollTo:we}),Ee(k),Qe(k),ie(ke),ue("scroll",Se,{target:y}),A({id:g,props:e,setLine:k,onRendered:Ie,currentName:X,scrollIntoView:E}),()=>{var t;return b("div",{ref:s,class:V([e.type])},[e.sticky?b(lt,{container:s.value,offsetTop:Z.value,onScroll:ye},{default:()=>{var n;return[Q(),(n=l["nav-bottom"])==null?void 0:n.call(l)]}}):[Q(),(t=l["nav-bottom"])==null?void 0:t.call(l)],b(dt,{count:c.length,inited:r.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:r.currentIndex,onChange:M},{default:()=>{var n;return[(n=l.default)==null?void 0:n.call(l)]}})])}}});const[vt,j]=O("tab"),ht=de({},Ue,{dot:Boolean,name:B,badge:B,title:String,disabled:Boolean,titleClass:We,titleStyle:[String,Object],showZeroBadge:W});var bt=L({name:vt,props:ht,setup(e,{slots:i}){const l=ve(),d=P(!1),{parent:a,index:o}=Ze(be);if(!a)return;const s=()=>{var g;return(g=e.name)!=null?g:o.value},h=()=>{d.value=!0,a.props.lazyRender&&z(()=>{a.onRendered(s(),e.title)})},u=T(()=>{const g=s()===a.currentName.value;return g&&!d.value&&h(),g});return I(()=>e.title,()=>{a.setLine(),a.scrollIntoView()}),Fe(Xe,u),()=>{var g;const y=`${a.id}-${o.value}`,{animated:f,swipeable:x,scrollspy:c,lazyRender:A}=a.props;if(!i.default&&!f)return;const r=c||u.value;if(f||x)return b(Ye,{id:l,role:"tabpanel",class:j("panel-wrapper",{inactive:!u.value}),tabindex:u.value?0:-1,"aria-hidden":!u.value,"aria-labelledby":y},{default:()=>{var C;return[b("div",{class:j("panel")},[(C=i.default)==null?void 0:C.call(i)])]}});const R=d.value||c||!A?(g=i.default)==null?void 0:g.call(i):null;return ae({id:l}),je(b("div",{id:l,role:"tabpanel",class:j("panel"),tabindex:r?0:-1,"aria-labelledby":y},[R]),[[Be,r]])}}});const kt=q(bt),It=q(ft);export{lt as S,It as T,kt as a};
